# Hash Table


## Часть 0. Как исследовать самому


- Скомпилируйте программу с помощью

```sh
make
```

- Запустите, передав в качестве аргумента путь к текстовому файлу, содержащему слова для занесения в таблицу

```sh
./run.exe [filepath]
```

Программа создаст файл result.csv, который можно открыть в любом редакторе электронных таблиц **(Разделительный символ, использующийся в csv файле зависит от вашего редактора электронных таблиц, поэтому файл может открыться некорректно)**


## Часть 1. Сравнение хеш-функций


### Введение


*Хеш-функция* - функция, которая принимает на вход данные (последовательность байт) и возвращает целочисленное значение, основанное на этих данных (зачастую хеш-функция использует последовательность байт, не задумываясь, что они значат). Поскольку любой целочисленный тип данных ограничен, то иногда на разные данные функция будет возвращать одинаковые значения (это называется *коллизией*). Чем лучше хеш-функция тем меньше у нее случается коллизий.

*Хеш-таблица* - ассоциативный массив, который работает по принципу **шкафа с буквами на ящиках, в котором дела распределены по первой букве**. В роли шкафа у нас массив внутри таблицы, в роли буквы выступает значение хеш-функции, а в роли ящика связный список, который содержит данные, на которых значения хеш-функции совпали. Таким образом, чтобы найти в хеш-таблице элемент достаточно подсчитать значение хеш-функции на ключе и линейно найти его в списке, лежащем в соотвествующей ячейке таблицы.


### Цель


Сравнить 7 различных хеш-функций, используя хеш-таблицу, и выяснить, какая их них является наиболее эффективной.


### Ход работы


Хеш-таблица является хорошим способом проверить, насколько равномерно хеш-функции распределяют свои значения.

**Исследование проводилось на ключах типа const char[] и значениях типа int.**

Исследуемые хеш-функции:
- "return 1" - Как следует из названия эта функция всегда возвращает единицу
- "first char" - Возвращает первый символ строки
- "len" - Возвращает длину строки
- "char sum" - Суммирует все символы строки
- "cyclic left" - На пустую строку возвращает единицу, иначе складывает текущий символ с текущей суммой циклически сдвинутой влево
- "cyclic right" - На пустую строку возвращает единицу, иначе складывает текущий символ с текущей суммой циклически сдвинутой вправо
- "gnu hash" - Суммирование с домножением предыдущего результата на 33

**Размер таблицы выбран взят равным 17. Такой маленький размер является крайне неэффективным и неприемлем в практической реализации, однако позволит нагляднее продемонстрировать разницу в распрелении значений хеш-функций.**

- Занесем в хеш-таблицу слова из файла словаря размером около 58000 слов.
- Подсчитаем длины цепочек внутри таблицы, соответствующих значению хеш-функции.
- Повторим для каждой хеш-функции.
- Сравним насколько равномерно распределены эти длины для каждой функции.


### Результат


График 1 иллюстрирует распределение значений 7 хеш-функций на 58000 уникальных значениях ключей.

| ![all-cmp](assets/all-cmp.png)                           |
|:---------------------------------------------------------|
|График 1. Результаты распределения значений 7 хеш-функций |

Из графика 1 видно, что "char sum", "cyclic left", "cyclic right", "gnu hash" значительно лучше остальных. На следующем графике сравним их более подробно. Размер таблицы увеличен до 907.

| ![top4-cmp](assets/top4-cmp.png)                |
|:------------------------------------------------|
|График 2. Детальное сравнение лучших хеш-функций |

Из графика 2 видно, что "cyclic left" и "gnu hash" значительно превосходят остальные. Чтобы сравнить их, посчитаем среднеквадратичное отклонение.

|              | Среднеквадратичное отклонение |
| ------------ | ----------------------------- |
| Cyclic left  | 13.52                         |
| GNU hash     | 8.01                          |

Как видно из расчетов, значения "gnu hash" наиболее близки к среднеарифметическому.


### Вывод


"gnu hash" является хеш-функцией с наиболее равномерно распределенными значениями по сравнению с остальными функциями.
